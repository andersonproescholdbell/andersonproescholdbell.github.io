---
export interface Props {
  title?: string;
  subtitle?: string;
  pageTitle?: string;
  description?: string;
  backLinkHref?: string;
  backLinkText?: string;
  originalReference?: string;
}

// Smart defaults based on context
function getDefaults(props: Props) {
  const isMainPage = !props.backLinkHref;
  
  if (isMainPage) {
    return {
      title: "Project Portfolio",
      subtitle: "Select a category to view related projects"
    };
  } else {
    // For category pages, the title will be passed in via props,
    // so we just need a sensible fallback.
    return {
      title: "Projects",
      subtitle: undefined
    };
  }
}

const defaults = getDefaults(Astro.props);

const { 
  title = defaults.title, 
  subtitle = defaults.subtitle, 
  pageTitle = title,
  description = `${title} - Project Portfolio`,
  backLinkHref,
  backLinkText = "‚Üê Back",
  originalReference
} = Astro.props;

import '../config/global.css';
import UniversalNav from '../components/UniversalNav.astro';
---

<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<title>{pageTitle}</title>
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content={description}>
		
		<!-- Google tag (gtag.js) -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-WSJGQ2TRHG"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'G-WSJGQ2TRHG');
		</script>
		
		<!-- Google Fonts for elegant typography -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Playfair+Display:wght@700&display=swap"
			rel="stylesheet">
	</head>
	<body class="bg-gray-900 text-gray-300 min-h-screen">
		{backLinkHref && <UniversalNav backText={backLinkText} backHref={backLinkHref} originalReference={originalReference} />}
		<style>
			@import '/src/config/design-tokens.css';
			
			/* Applying the custom fonts */
			body {
				font-family: 'Inter', sans-serif;
			}

			h1,
			h2,
			h3,
			h4,
			h5,
			h6 {
				font-family: 'Playfair Display', serif;
			}

			/* Base main styling */
			.project-grid-main {
				min-height: 100vh;
			}

			/* Add spacing for fixed nav when navigation is present */
			.project-grid-main-with-nav {
				padding-top: var(--nav-height-desktop);
				min-height: 100vh;
			}

			/* Mobile adjustments */
			@media (max-width: 768px) {
				.project-grid-main-with-nav {
					padding-top: var(--nav-height-mobile);
				}
			}
		</style>

		<main class={`flex-grow ${backLinkHref ? 'project-grid-main-with-nav' : 'project-grid-main'}`}>
			<div class="container mx-auto p-8 w-[50%] sm:w-[60%] md:w-[90%] lg:w-[80%] xl:w-[60%] 2xl:w-[60%] flex flex-col items-center">
				<!-- Header Section -->
				<div class="text-center mb-12">
					<h1 class="text-4xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent">
						{title}
					</h1>
					{subtitle && (
						<p class="text-xl md:text-2xl text-gray-400 max-w-2xl mx-auto">
							{subtitle}
						</p>
					)}
				</div>
				
				<!-- Project Grid -->
				<div class="grid grid-cols-[repeat(auto-fit,minmax(200px,300px))] gap-8 w-full max-w-6xl flex items-center justify-center">
					<slot />
				</div>

			</div>
		</main>
	</body>
</html>